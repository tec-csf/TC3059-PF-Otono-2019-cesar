{"ast":null,"code":"var _jsxFileName = \"/home/cesar/Desktop/Riesgo_Cognitivo/frontend/src/App.js\";\nimport React, { Component } from 'react';\nimport '../src/App.scss';\nimport Dashboard from '../src/pages/Dashboard'; // PAGES\n\nimport Anomalydetection from '../src/pages/anomaly-detection';\nimport Landing from '../src/pages/Landing';\nimport Welcome from '../src/pages/Welcome';\nimport Settings from '../src/pages/Settings';\nimport Profile from '../src/pages/Profile';\nimport UserProfile from './pages/UserProfile';\nimport Pay from './pages/Pay';\nimport Register from './pages/Register';\nimport Confirmation from './pages/Confirmation';\nimport SelectPlan from './pages/SelectPlan';\nimport AforeDashboard from './pages/AforeDashboard';\nimport AforeExchange from './pages/AforeExchange';\nimport Terms from './pages/Terms'; // AUTH0\n\nimport Callback from './auth0/Callback';\nimport axios from 'axios';\nimport jwtDecode from 'jwt-decode';\nimport { BrowserRouter as Router, Switch, Route, Redirect } from 'react-router-dom';\nconst API_URL = process.env.REACT_APP_API_URL;\nconst AUTH0_URL = process.env.REACT_APP_AUTH0_URL;\nconst AUTH0_TOKEN = process.env.REACT_APP_AUTH0_TOKEN;\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this._setState = state => {\n      this.setState(state);\n    };\n\n    this.Scrapper = data => {\n      data.twitter = [];\n      this.setState({\n        uploading: true\n      }, () => {\n        axios.post(API_URL + \"/api/v1/search/upload\", {\n          data\n        }).then(res => {\n          this.setState({\n            uploading: false\n          });\n        });\n      });\n    };\n\n    this.componentDidMount = () => {\n      this.checkRole();\n    };\n\n    this.checkRole = async () => {\n      let user_id = '';\n\n      try {\n        user_id = localStorage.getItem(\"id_token\").sub;\n      } catch {\n        console.log(\"NO USER ID\");\n      }\n\n      var res = await axios.get(API_URL + \"/api/v1/search/metadata\", {\n        params: {\n          user_id\n        }\n      });\n\n      if (res.data !== \"empty\") {\n        this.setState({\n          payed: true\n        });\n      }\n\n      if (user_id !== '') {\n        let headers = {\n          'Authorization': AUTH0_TOKEN,\n          'Content-Type': 'application/json'\n        };\n        res = await axios.get(AUTH0_URL + \"/api/v2/users/\" + jwtDecode(localStorage.getItem(\"id_token\")).sub + \"/roles\", {\n          headers: headers\n        });\n\n        if (res[\"data\"][0] != null) {\n          localStorage.setItem(\"role\", res[\"data\"][0][\"name\"]);\n          this.setState({\n            role: res[\"data\"][0][\"name\"]\n          });\n        } else {\n          this.setState({\n            role: \"no\"\n          });\n        }\n      }\n    };\n\n    this.state = {\n      role: \"\",\n      uploading: false,\n      current_curp: \"\",\n      payed: false\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(Router, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/callback\",\n      render: (...props) => React.createElement(Callback, Object.assign({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/landing\",\n      render: (...props) => this.state.role === \"no\" ? React.createElement(Redirect, {\n        to: \"/pay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }) : this.props.auth.isAuthenticated() ? React.createElement(Redirect, {\n        to: \"/welcome\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }) : React.createElement(Landing, Object.assign({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/pay\",\n      render: (...props) => this.props.auth.isAuthenticated() ? React.createElement(Pay, Object.assign({}, this.props, {\n        select_plan: false,\n        checkRole: this.checkRole,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      })) : React.createElement(Redirect, {\n        to: \"/landing\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/register\",\n      render: (...props) => React.createElement(Register, Object.assign({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/terms\",\n      render: (...props) => React.createElement(Terms, Object.assign({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/confirmation\",\n      render: (...props) => React.createElement(Confirmation, Object.assign({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/select-plan\",\n      render: (...props) => this.props.auth.isAuthenticated() ? React.createElement(Pay, Object.assign({}, this.props, {\n        select_plan: true,\n        checkRole: this.checkRole,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      })) : React.createElement(Redirect, {\n        to: \"/landing\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/anomaly-detection/:rfc/:type\",\n      name: \"anomaly-detection\",\n      component: props => this.state.role === \"no\" ? React.createElement(Redirect, {\n        to: \"/pay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }) : this.props.auth.isAuthenticated() ? React.createElement(Anomalydetection, {\n        location: props,\n        parent: this.props,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }) : React.createElement(Redirect, {\n        to: \"/landing\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/welcome\",\n      exact: true,\n      render: (...props) => this.state.role === \"no\" ? React.createElement(Redirect, {\n        to: \"/pay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }) : this.props.auth.isAuthenticated() ? React.createElement(Welcome, Object.assign({}, this.props, {\n        role: this.state.role,\n        setState: this._setState,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      })) : React.createElement(Redirect, {\n        to: \"/landing\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/afore-exchange\",\n      exact: true,\n      render: (...props) => this.state.role === \"no\" ? React.createElement(Redirect, {\n        to: \"/pay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }) : this.props.auth.isAuthenticated() ? React.createElement(AforeExchange, Object.assign({}, this.props, {\n        role: this.state.role,\n        setState: this._setState,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      })) : React.createElement(Redirect, {\n        to: \"/landing\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/dashboard\",\n      exact: true,\n      render: (...props) => this.state.role === \"no\" ? React.createElement(Redirect, {\n        to: \"/pay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }) : this.props.auth.isAuthenticated() ? React.createElement(Dashboard, Object.assign({}, this.props, {\n        role: this.state.role,\n        Scrapper: this.Scrapper,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      })) : React.createElement(Redirect, {\n        to: \"/landing\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/afore-dashboard\",\n      exact: true,\n      render: (...props) => this.state.role === \"no\" ? React.createElement(Redirect, {\n        to: \"/pay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }) : this.props.auth.isAuthenticated() ? React.createElement(AforeDashboard, Object.assign({}, this.props, {\n        role: this.state.role,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      })) : React.createElement(Redirect, {\n        to: \"/landing\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/settings\",\n      exact: true,\n      render: (...props) => this.state.role === \"no\" ? React.createElement(Redirect, {\n        to: \"/pay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }) : this.props.auth.isAuthenticated() ? React.createElement(Settings, Object.assign({}, this.props, {\n        role: this.state.role,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      })) : React.createElement(Redirect, {\n        to: \"/landing\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/profile\",\n      exact: true,\n      render: (...props) => this.state.role === \"no\" ? React.createElement(Redirect, {\n        to: \"/pay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }) : this.props.auth.isAuthenticated() ? React.createElement(Profile, Object.assign({}, this.props, {\n        role: this.state.role,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      })) : React.createElement(Redirect, {\n        to: \"/landing\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/user-profile\",\n      exact: true,\n      render: (...props) => this.state.role === \"no\" ? React.createElement(Redirect, {\n        to: \"/pay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }) : this.props.auth.isAuthenticated() ? React.createElement(UserProfile, Object.assign({}, this.props, {\n        role: this.state.role,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      })) : React.createElement(Redirect, {\n        to: \"/landing\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }), React.createElement(Redirect, {\n      from: \"/\",\n      to: \"/landing\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/cesar/Desktop/Riesgo_Cognitivo/frontend/src/App.js"],"names":["React","Component","Dashboard","Anomalydetection","Landing","Welcome","Settings","Profile","UserProfile","Pay","Register","Confirmation","SelectPlan","AforeDashboard","AforeExchange","Terms","Callback","axios","jwtDecode","BrowserRouter","Router","Switch","Route","Redirect","API_URL","process","env","REACT_APP_API_URL","AUTH0_URL","REACT_APP_AUTH0_URL","AUTH0_TOKEN","REACT_APP_AUTH0_TOKEN","App","constructor","props","_setState","state","setState","Scrapper","data","twitter","uploading","post","then","res","componentDidMount","checkRole","user_id","localStorage","getItem","sub","console","log","get","params","payed","headers","setItem","role","current_curp","render","auth","isAuthenticated"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport '../src/App.scss';\nimport Dashboard from '../src/pages/Dashboard'\n\n// PAGES\nimport Anomalydetection from '../src/pages/anomaly-detection'\nimport Landing from '../src/pages/Landing'\nimport Welcome from '../src/pages/Welcome'\nimport Settings from '../src/pages/Settings'\nimport Profile from '../src/pages/Profile'\nimport UserProfile from './pages/UserProfile'\nimport Pay from './pages/Pay'\nimport Register from './pages/Register'\nimport Confirmation from './pages/Confirmation'\nimport SelectPlan from './pages/SelectPlan'\nimport AforeDashboard from './pages/AforeDashboard'\nimport AforeExchange from './pages/AforeExchange'\nimport Terms from './pages/Terms'\n\n// AUTH0\nimport Callback from './auth0/Callback';\nimport axios from 'axios'\nimport jwtDecode from 'jwt-decode'\n\nimport { BrowserRouter as Router, Switch, Route, Redirect} from 'react-router-dom';\n\nconst API_URL = process.env.REACT_APP_API_URL\nconst AUTH0_URL = process.env.REACT_APP_AUTH0_URL\nconst AUTH0_TOKEN = process.env.REACT_APP_AUTH0_TOKEN\n\nclass App extends Component {\n\n  constructor(props){\n    super(props)\n\n    this.state = {\n      role:\"\",\n      uploading: false,\n      current_curp: \"\",\n      payed: false\n    }\n  }\n  _setState = (state) => {\n    this.setState(state);\n  }\n\n  Scrapper = (data) => {\n\n    data.twitter = []\n\n    this.setState({\n      uploading:true\n    }, () => {\n        axios.post(API_URL + \"/api/v1/search/upload\", {\n      data\n    }).then((res) => {\n\n      this.setState({\n        uploading:false\n      })\n    });\n    })\n\n    \n  }\n\n  componentDidMount = () => {\n    this.checkRole();\n  }\n\n  checkRole = async () => {\n    let user_id = ''\n    try {\n      user_id = localStorage.getItem(\"id_token\").sub\n    }\n    catch{\n      console.log(\"NO USER ID\")\n    }\n\n    var res = await axios.get(API_URL + \"/api/v1/search/metadata\", {\n      params: {\n        user_id\n      }\n    });\n\n    if (res.data !== \"empty\") {\n      this.setState({\n        payed: true\n      })\n    }\n\n    if (user_id !== '') {\n\n      let headers = {\n        'Authorization': AUTH0_TOKEN,\n        'Content-Type': 'application/json'\n      }\n      res = await axios.get(AUTH0_URL + \"/api/v2/users/\" + jwtDecode(localStorage.getItem(\"id_token\")).sub + \"/roles\", {\n        headers: headers\n      });\n\n      if (res[\"data\"][0] != null) {\n        localStorage.setItem(\"role\", res[\"data\"][0][\"name\"]);\n        this.setState({\n          role: res[\"data\"][0][\"name\"]\n        })\n      }\n      else {\n        this.setState({\n          role: \"no\"\n        })\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <Router>\n          <Switch>\n            <Route path =\"/callback\" render ={(...props) =>(\n              <Callback {...this.props}/>\n            )}/>\n            <Route path =\"/landing\" render ={(...props) =>(\n              this.state.role === \"no\" ? (\n                <Redirect to=\"/pay\" />\n              ) : this.props.auth.isAuthenticated() ? (\n                <Redirect to=\"/welcome\" />\n              ) : (\n                <Landing {...this.props}/>\n              )\n            )}/>\n            <Route path =\"/pay\" render ={(...props) =>(\n              this.props.auth.isAuthenticated() ? (\n                <Pay {...this.props} select_plan={false} checkRole={this.checkRole}/>\n              ) : (\n                <Redirect to=\"/landing\" />\n              )\n            )}/>\n            <Route path =\"/register\" render ={(...props) =>(\n              <Register {...this.props}/>\n            )}/>\n            <Route path =\"/terms\" render ={(...props) =>(\n              <Terms {...this.props}/>\n            )}/>\n            <Route path =\"/confirmation\" render ={(...props) =>(\n              <Confirmation {...this.props}/>\n            )}/>\n            <Route path =\"/select-plan\" render ={(...props) =>(\n              this.props.auth.isAuthenticated() ? (\n                <Pay {...this.props} select_plan={true} checkRole={this.checkRole}/>\n              ) : (\n                <Redirect to=\"/landing\" />\n              )\n            )}/>            \n            <Route path =\"/anomaly-detection/:rfc/:type\" name=\"anomaly-detection\" component={(props) =>\n              this.state.role === \"no\" ? (\n                <Redirect to=\"/pay\" />\n              ) : this.props.auth.isAuthenticated() ? (\n                <Anomalydetection location={props} parent={this.props}/>\n              ) : (\n                <Redirect to=\"/landing\"/>\n              )\n            }\n            />\n            <Route path=\"/welcome\" exact render={(...props)=>(\n              this.state.role === \"no\" ? (\n                <Redirect to=\"/pay\" />\n              ) : this.props.auth.isAuthenticated() ? (\n                <Welcome {...this.props} role={this.state.role} setState={this._setState}/>\n              ) : (\n                <Redirect to=\"/landing\"/>\n              )\n            )}/>\n            <Route path=\"/afore-exchange\" exact render={(...props)=>(\n              this.state.role === \"no\" ? (\n                <Redirect to=\"/pay\" />\n              ) : this.props.auth.isAuthenticated() ? (\n                <AforeExchange {...this.props} role={this.state.role} setState={this._setState} />\n              ) : (\n                <Redirect to=\"/landing\"/>\n              )\n            )}/>\n            <Route path=\"/dashboard\" exact render={(...props) => (\n              this.state.role === \"no\" ? (\n                <Redirect to=\"/pay\" />\n              ) : this.props.auth.isAuthenticated() ? (\n                <Dashboard {...this.props} role={this.state.role} Scrapper={this.Scrapper} />\n              ) : (\n                <Redirect to=\"/landing\"/>\n              )\n            )} />\n            <Route path=\"/afore-dashboard\" exact render={(...props) => (\n              this.state.role === \"no\" ? (\n                <Redirect to=\"/pay\" />\n              ) : this.props.auth.isAuthenticated() ? (\n                <AforeDashboard {...this.props} role={this.state.role}/>\n              ) : (\n                <Redirect to=\"/landing\"/>\n              )\n            )} />\n            <Route path=\"/settings\" exact render={(...props) => (\n              this.state.role === \"no\" ? (\n                <Redirect to=\"/pay\" />\n              ) : this.props.auth.isAuthenticated() ? (\n                <Settings {...this.props} role={this.state.role}/>\n              ) : (\n                <Redirect to=\"/landing\"/>\n              )\n            )} />            \n            <Route path=\"/profile\" exact render={(...props) => (\n              this.state.role === \"no\" ? (\n                <Redirect to=\"/pay\" />\n              ) : this.props.auth.isAuthenticated() ? (\n                <Profile {...this.props} role={this.state.role} />\n              ) : (\n                <Redirect to=\"/landing\" />\n              )\n            )} />\n            <Route path=\"/user-profile\" exact render={(...props) => (\n              this.state.role === \"no\" ? (\n                <Redirect to=\"/pay\" />\n              ) : this.props.auth.isAuthenticated() ? (\n                <UserProfile {...this.props} role={this.state.role} />\n              ) : (\n                <Redirect to=\"/landing\" />\n              )\n            )} />\n            <Redirect from=\"/\" to=\"/landing\" />\n          </Switch>\n        </Router>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}