{"ast":null,"code":"var _jsxFileName = \"/home/cesar/Desktop/Riesgo_Cognitivo/frontend/src/components/WelcomTable/WelcomeTable.jsx\";\nimport React, { Component } from 'react';\nimport { Table } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport InputForm from '../InputForm/InputForm';\nimport { FaTrash, FaAngleDown } from 'react-icons/fa';\nimport Paginator from '../Paginator/Paginator';\nimport { TabContent, TabPane, Nav, NavItem, NavLink, Progress } from 'reactstrap';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { ButtonPrimary } from '../Button/Button';\nimport { FaExternalLinkAlt } from 'react-icons/fa';\nimport classnames from 'classnames';\nimport axios from 'axios';\nimport jwtDecode from 'jwt-decode';\nimport DropdownSelect from '../DropdownSelect/DropdownSelect';\nconst API_URL = process.env.REACT_APP_API_URL;\nconst dropdown_percentages_items = [{\n  value: \"0\",\n  text: \"Todos\"\n}, {\n  value: \"1\",\n  text: \"0% - 20%\"\n}, {\n  value: \"2\",\n  text: \"20% - 40%\"\n}, {\n  value: \"3\",\n  text: \"40% - 60%\"\n}, {\n  value: \"4\",\n  text: \"60% - 80%\"\n}, {\n  value: \"5\",\n  text: \"80% - 100%\"\n}];\n\nclass WelcomeTable extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {\n      this.search_all(0);\n    };\n\n    this.componentWillUnmount = () => {\n      if (this.myVar) {\n        clearInterval(this.myVar);\n      }\n    };\n\n    this.componentDidUpdate = () => {\n      if (!this.state.filtered_date && this.state.from_date !== '' && this.state.to_date !== '') {\n        this.setState({\n          filtered_date: true\n        });\n        this.search_all(this.state.percentage_filter);\n      }\n    };\n\n    this.toggle = tab => {\n      if (this.state.activeTab !== tab) this.setState({\n        activeTab: tab\n      });\n    };\n\n    this._setState = state => {\n      this.setState(state);\n    };\n\n    this.search_all = percentageFilter => {\n      let user_id = jwtDecode(localStorage.getItem(\"id_token\")).sub;\n      let updateInfo = [];\n      let paginatedEmployees = [];\n      let employees = [];\n      let paginatedOrganizations = [];\n      let organizations = [];\n      axios.post(API_URL + \"/api/v1/get_all_employees\", {\n        user_id,\n        filter_percentages: percentageFilter,\n        from_date: this.state.from_date,\n        to_date: this.state.to_date\n      }).then(res => {\n        for (var i = 0; i < res.data[0].length; i++) {\n          if (i % 5 === 0) {\n            if (i > 0) {\n              paginatedEmployees.push(employees);\n            }\n\n            employees = [];\n          }\n\n          employees.push(res.data[0][i]);\n        }\n\n        if (employees.length > 0) {\n          paginatedEmployees.push(employees);\n        }\n\n        for (var i = 0; i < res.data[1].length; i++) {\n          if (i % 5 === 0) {\n            if (i > 0) {\n              paginatedOrganizations.push(organizations);\n            }\n\n            organizations = [];\n          }\n\n          organizations.push(res.data[1][i]);\n        }\n\n        if (organizations.length > 0) {\n          paginatedOrganizations.push(organizations);\n        }\n\n        if (res.data !== 'empty') {\n          this.setState({\n            employees: paginatedEmployees,\n            all_employees: paginatedEmployees,\n            organizations: paginatedOrganizations,\n            pagesEmployees: paginatedEmployees.length,\n            pagesOrganizations: paginatedOrganizations.length,\n            currentPage: 1\n          }, () => {\n            if (this.state.employees.length > 0) {\n              this.state.employees[0].forEach(function (element) {\n                if (element.percentage < 100) {\n                  updateInfo.push('true');\n                } else {\n                  updateInfo.push('false');\n                }\n              });\n            }\n\n            if (this.state.organizations.length > 0) {\n              this.state.organizations[0].forEach(function (element) {\n                if (element.percentage < 100) {\n                  updateInfo.push('true');\n                } else {\n                  updateInfo.push('false');\n                }\n              });\n            }\n\n            if (updateInfo.indexOf('true') === -1) {\n              clearInterval(myVar);\n            }\n\n            console.log(this.state.filter_name);\n\n            if (this.state.filter_name) {\n              this.searchFilter();\n            }\n          });\n        }\n      });\n      var myVar = setInterval(async () => {\n        updateInfo = [];\n        paginatedEmployees = [];\n        employees = [];\n        paginatedOrganizations = [];\n        organizations = [];\n        axios.post(API_URL + \"/api/v1/get_all_employees\", {\n          user_id,\n          filter_percentages: percentageFilter,\n          from_date: this.state.from_date,\n          to_date: this.state.to_date\n        }).then(res => {\n          for (var i = 0; i < res.data[0].length; i++) {\n            if (i % 5 === 0) {\n              if (i > 0) {\n                paginatedEmployees.push(employees);\n              }\n\n              employees = [];\n            }\n\n            employees.push(res.data[0][i]);\n          }\n\n          if (employees.length > 0) {\n            paginatedEmployees.push(employees);\n          }\n\n          for (var i = 0; i < res.data[1].length; i++) {\n            if (i % 5 === 0) {\n              if (i > 0) {\n                paginatedOrganizations.push(organizations);\n              }\n\n              organizations = [];\n            }\n\n            organizations.push(res.data[1][i]);\n          }\n\n          if (organizations.length > 0) {\n            paginatedOrganizations.push(organizations);\n          }\n\n          if (res.data !== 'empty') {\n            this.setState({\n              employees: paginatedEmployees,\n              all_employees: paginatedEmployees,\n              organizations: paginatedOrganizations,\n              pagesEmployees: paginatedEmployees.length,\n              pagesOrganizations: paginatedOrganizations.length\n            }, () => {\n              if (this.state.employees.length > 0) {\n                this.state.employees[0].forEach(function (element) {\n                  if (element.percentage < 100) {\n                    updateInfo.push('true');\n                  } else {\n                    updateInfo.push('false');\n                  }\n                });\n              }\n\n              if (this.state.organizations.length > 0) {\n                this.state.organizations[0].forEach(function (element) {\n                  if (element.percentage < 100) {\n                    updateInfo.push('true');\n                  } else {\n                    updateInfo.push('false');\n                  }\n                });\n              }\n\n              if (updateInfo.indexOf('true') === -1) {\n                clearInterval(myVar);\n              }\n\n              console.log(this.state.filter_name);\n\n              if (this.state.filter_name) {\n                this.searchFilter();\n              }\n            });\n          }\n        });\n      }, 5000);\n    };\n\n    this.handlePercentage = event => {\n      this.setState({\n        percentage_filter: event\n      });\n      this.search_all(parseInt(event));\n    };\n\n    this.handleFromDate = event => {\n      this.setState({\n        from_date: event.target.value,\n        filtered_date: false\n      });\n    };\n\n    this.handleToDate = event => {\n      this.setState({\n        to_date: event.target.value,\n        filtered_date: false\n      });\n    };\n\n    this.deletePerson = () => {\n      let user_id = jwtDecode(localStorage.getItem(\"id_token\")).sub;\n      let rfc = this.state.rfc_to_delete;\n      axios.post(API_URL + '/api/v1/search/delete', {\n        rfc,\n        user_id\n      }).then(res => {\n        window.location.reload();\n      });\n    };\n\n    this.toggleModalDeleteEmp = rfc => {\n      this.setState({\n        modal: !this.state.modal,\n        rfc_to_delete: rfc\n      });\n    };\n\n    this.handleSearch = ev => {\n      if (ev.target.value.length > 0) {\n        this.setState({\n          filter_name: true\n        });\n      } else {\n        this.setState({\n          filter_name: false\n        });\n      }\n\n      var search_value = ev.target.value.toUpperCase();\n      this.setState({\n        name_search: search_value\n      }, () => {\n        this.searchFilter();\n      });\n    };\n\n    this.searchFilter = () => {\n      var search_value = this.state.name_search.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n      var filtered_employees = [];\n\n      for (var i = 0; i < this.state.all_employees.length; i++) {\n        for (var j = 0; j < this.state.all_employees[i].length; j++) {\n          if (this.state.all_employees[i][j].name.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").startsWith(search_value) || this.state.all_employees[i][j].lastName1.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").startsWith(search_value) || this.state.all_employees[i][j].lastName2.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").startsWith(search_value)) {\n            filtered_employees.push(this.state.all_employees[i][j]);\n          }\n        }\n      }\n\n      var paginatedEmployees = [];\n      var employees = [];\n\n      for (var i = 0; i < filtered_employees.length; i++) {\n        if (i % 5 === 0) {\n          if (i > 0) {\n            paginatedEmployees.push(employees);\n          }\n\n          employees = [];\n        }\n\n        employees.push(filtered_employees[i]);\n      }\n\n      if (employees.length > 0) {\n        paginatedEmployees.push(employees);\n      }\n\n      let updateInfo = [];\n      this.setState({\n        employees: paginatedEmployees,\n        pagesEmployees: paginatedEmployees.length,\n        currentPage: 1\n      }, () => {\n        if (this.state.employees.length > 0) {\n          this.state.employees[0].forEach(function (element) {\n            if (element.percentage < 100) {\n              updateInfo.push('true');\n            } else {\n              updateInfo.push('false');\n            }\n          });\n        }\n      });\n    };\n\n    this.state = {\n      activeTab: '1',\n      pagesEmployees: 0,\n      pagesOrganizations: 0,\n      currentPage: 1,\n      all_employees: [[]],\n      employees: [[]],\n      organizations: [[]],\n      modal: false,\n      rfc_to_delete: '',\n      from_date: '',\n      to_date: '',\n      filtered_date: true,\n      percentage_filter: 0,\n      filter_name: false,\n      name_search: \"\"\n    };\n  }\n\n  render() {\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      centered: true,\n      isOpen: this.state.modal,\n      toggle: () => this.toggleModalDeleteEmp(),\n      className: this.props.className,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372\n      },\n      __self: this\n    }, React.createElement(ModalHeader, {\n      toggle: () => this.toggleModalDeleteEmp(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373\n      },\n      __self: this\n    }, \"Eliminar Persona F\\xEDsica\"), React.createElement(ModalBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374\n      },\n      __self: this\n    }, \"\\xBFEst\\xE1 seguro de \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375\n      },\n      __self: this\n    }, \"Eliminar\"), \" a esta persona? no podr\\xE1 recuperar la informaci\\xF3n despu\\xE9s.\"), React.createElement(ModalFooter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377\n      },\n      __self: this\n    }, React.createElement(ButtonPrimary, {\n      onClick: () => this.toggleModalDeleteEmp(),\n      title: \"Cancelar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378\n      },\n      __self: this\n    }), React.createElement(ButtonPrimary, {\n      onClick: () => this.deletePerson(),\n      title: \"Eliminar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379\n      },\n      __self: this\n    })))), React.createElement(Nav, {\n      tabs: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383\n      },\n      __self: this\n    }, React.createElement(NavItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384\n      },\n      __self: this\n    }, React.createElement(NavLink, {\n      className: classnames({\n        active: this.state.activeTab === '1'\n      }),\n      onClick: () => {\n        this.toggle('1');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385\n      },\n      __self: this\n    }, \"Personas f\\xEDsicas\")), React.createElement(NavItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392\n      },\n      __self: this\n    }, React.createElement(NavLink, {\n      className: classnames({\n        active: this.state.activeTab === '2'\n      }),\n      onClick: () => {\n        this.toggle('2');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393\n      },\n      __self: this\n    }, \"Personas morales\"))), React.createElement(TabContent, {\n      activeTab: this.state.activeTab,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402\n      },\n      __self: this\n    }, React.createElement(TabPane, {\n      tabId: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cm-card -white -no-cursor\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404\n      },\n      __self: this\n    }, React.createElement(Table, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409\n      },\n      __self: this\n    }, \"Nombre\"), React.createElement(InputForm, {\n      inputColor: \"-secondary\",\n      warning: \"No se encntraron resultados\",\n      type: \"text\",\n      placeholder: 'Buscar',\n      onChange: this.handleSearch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410\n      },\n      __self: this\n    })), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413\n      },\n      __self: this\n    }, \"Fecha de alta\"), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 414\n      },\n      __self: this\n    }, React.createElement(InputForm, {\n      customClasses: \"col-6\",\n      inputColor: \"-secondary\",\n      warning: \"Datos no v\\xE1lidos\",\n      type: \"date\",\n      placeholder: 'de',\n      onChange: this.handleFromDate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 415\n      },\n      __self: this\n    }), React.createElement(InputForm, {\n      customClasses: \"col-6\",\n      inputColor: \"-secondary\",\n      warning: \"Datos no v\\xE1lidos\",\n      type: \"date\",\n      placeholder: 'a',\n      onChange: this.handleToDate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416\n      },\n      __self: this\n    }))), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 420\n      },\n      __self: this\n    }, \"Porcentaje de confiabilidad\"), React.createElement(DropdownSelect, {\n      onChange: this.handlePercentage,\n      items: dropdown_percentages_items,\n      selected: \"Todos\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421\n      },\n      __self: this\n    })))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 425\n      },\n      __self: this\n    }, this.state.employees.length > 0 && this.state.employees[this.state.currentPage - 1].map(emp => {\n      let fix_date = emp.date;\n      fix_date = fix_date.replace('GMT', '');\n      fix_date = fix_date.split(',')[1];\n      const complete_name = emp.name + ' ' + emp.lastName1 + ' ' + emp.lastName2;\n      return React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 434\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        scope: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"anomaly-detection/\".concat(emp.rfc, \"/fisica\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436\n        },\n        __self: this\n      }, complete_name)), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438\n        },\n        __self: this\n      }, fix_date), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439\n        },\n        __self: this\n      }, emp.score, \"%\"), emp.percentage >= 100 && React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: {\n          pathname: \"anomaly-detection/\".concat(emp.rfc, \"/fisica\")\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 442\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"icon-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445\n        },\n        __self: this\n      }, React.createElement(FaExternalLinkAlt, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 446\n        },\n        __self: this\n      })))), emp.percentage < 100 && React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 452\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        align: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 453\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 453\n        },\n        __self: this\n      }, emp.percentage, \" %\")), React.createElement(Progress, {\n        value: emp.percentage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 454\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.toggleModalDeleteEmp.bind(this, emp.rfc),\n        className: \"fa-btn -warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457\n        },\n        __self: this\n      }, React.createElement(FaTrash, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457\n        },\n        __self: this\n      }))));\n    }))), React.createElement(Paginator, {\n      pages: this.state.pagesEmployees,\n      setState: this._setState,\n      currentPage: this.state.currentPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 463\n      },\n      __self: this\n    }))), React.createElement(TabPane, {\n      tabId: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 466\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cm-card -white -no-cursor\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 467\n      },\n      __self: this\n    }, React.createElement(Table, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 468\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 469\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 470\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 471\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 472\n      },\n      __self: this\n    }, \"Nombre\"), React.createElement(InputForm, {\n      inputColor: \"-secondary\",\n      warning: \"Datos no v\\xE1lidos\",\n      type: \"text\",\n      placeholder: 'Buscar',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 473\n      },\n      __self: this\n    })), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 475\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476\n      },\n      __self: this\n    }, \"Fecha de alta\"), React.createElement(InputForm, {\n      inputColor: \"-secondary\",\n      warning: \"Datos no v\\xE1lidos\",\n      type: \"date\",\n      placeholder: 'Buscar',\n      onChange: this.handleDate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477\n      },\n      __self: this\n    })), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 480\n      },\n      __self: this\n    }, \"Porcentaje de confiabilidad\"), React.createElement(\"div\", {\n      className: \"dropdown-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 481\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      className: \"dropdown-user w-100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 482\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 483\n      },\n      __self: this\n    }, \"cualquiera\"), React.createElement(\"option\", {\n      value: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 484\n      },\n      __self: this\n    }, \"0 - 20%\"), React.createElement(\"option\", {\n      value: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 485\n      },\n      __self: this\n    }, \"20% - 40%\"), React.createElement(\"option\", {\n      value: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 486\n      },\n      __self: this\n    }, \"40% - 60%\"), React.createElement(\"option\", {\n      value: \"4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 487\n      },\n      __self: this\n    }, \"60% - 80%\"), React.createElement(\"option\", {\n      value: \"5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 488\n      },\n      __self: this\n    }, \"80% - 100%\")), React.createElement(\"button\", {\n      className: \"fa-btn dropdown-icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 490\n      },\n      __self: this\n    }, React.createElement(FaAngleDown, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 491\n      },\n      __self: this\n    })))))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 497\n      },\n      __self: this\n    }, this.state.organizations.length > 0 && this.state.organizations[this.state.currentPage - 1].map(emp => {\n      let fix_date = emp.date;\n      fix_date = fix_date.replace('GMT', '');\n      fix_date = fix_date.split(',')[1];\n      const complete_name = emp.name;\n      return React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 506\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        scope: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 507\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"anomaly-detection/\".concat(emp.rfc, \"/moral\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 508\n        },\n        __self: this\n      }, complete_name)), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 510\n        },\n        __self: this\n      }, fix_date), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 511\n        },\n        __self: this\n      }, emp.score, \"%\"), emp.percentage >= 100 && React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 513\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: {\n          pathname: \"anomaly-detection/\".concat(emp.rfc, \"/moral\")\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 514\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"icon-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 517\n        },\n        __self: this\n      }, React.createElement(FaExternalLinkAlt, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 518\n        },\n        __self: this\n      })))), emp.percentage < 100 && React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 524\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        align: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 525\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 525\n        },\n        __self: this\n      }, emp.percentage, \" %\")), React.createElement(Progress, {\n        value: emp.percentage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 526\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 529\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"fa-btn -warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 529\n        },\n        __self: this\n      }, React.createElement(FaTrash, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 529\n        },\n        __self: this\n      }))));\n    }))), React.createElement(Paginator, {\n      pages: this.state.pagesEmployees,\n      setState: this._setState,\n      currentPage: this.state.currentPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 535\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default WelcomeTable;","map":{"version":3,"sources":["/home/cesar/Desktop/Riesgo_Cognitivo/frontend/src/components/WelcomTable/WelcomeTable.jsx"],"names":["React","Component","Table","Link","InputForm","FaTrash","FaAngleDown","Paginator","TabContent","TabPane","Nav","NavItem","NavLink","Progress","Modal","ModalHeader","ModalBody","ModalFooter","ButtonPrimary","FaExternalLinkAlt","classnames","axios","jwtDecode","DropdownSelect","API_URL","process","env","REACT_APP_API_URL","dropdown_percentages_items","value","text","WelcomeTable","constructor","props","componentDidMount","search_all","componentWillUnmount","myVar","clearInterval","componentDidUpdate","state","filtered_date","from_date","to_date","setState","percentage_filter","toggle","tab","activeTab","_setState","percentageFilter","user_id","localStorage","getItem","sub","updateInfo","paginatedEmployees","employees","paginatedOrganizations","organizations","post","filter_percentages","then","res","i","data","length","push","all_employees","pagesEmployees","pagesOrganizations","currentPage","forEach","element","percentage","indexOf","console","log","filter_name","searchFilter","setInterval","handlePercentage","event","parseInt","handleFromDate","target","handleToDate","deletePerson","rfc","rfc_to_delete","window","location","reload","toggleModalDeleteEmp","modal","handleSearch","ev","search_value","toUpperCase","name_search","normalize","replace","filtered_employees","j","name","startsWith","lastName1","lastName2","render","className","active","map","emp","fix_date","date","split","complete_name","score","pathname","bind","handleDate"],"mappings":"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","sourcesContent":["import React, {\n  Component\n} from 'react'\nimport { Table } from 'reactstrap';\nimport { Link } from 'react-router-dom'\nimport InputForm from '../InputForm/InputForm'\nimport {\n  FaTrash,\n  FaAngleDown\n} from 'react-icons/fa'\nimport Paginator from '../Paginator/Paginator';\nimport { TabContent, TabPane, Nav, NavItem, NavLink, Progress } from 'reactstrap';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { ButtonPrimary } from '../Button/Button'\nimport { FaExternalLinkAlt } from 'react-icons/fa'\nimport classnames from 'classnames'; import axios from 'axios'\nimport jwtDecode from 'jwt-decode'\nimport DropdownSelect from '../DropdownSelect/DropdownSelect'\n\nconst API_URL = process.env.REACT_APP_API_URL\n\nconst dropdown_percentages_items = [\n  {\n    value: \"0\",\n    text: \"Todos\"\n  },\n  {\n    value: \"1\",\n    text: \"0% - 20%\"\n  },\n  {\n    value: \"2\",\n    text: \"20% - 40%\"\n  },\n  {\n    value: \"3\",\n    text: \"40% - 60%\"\n  },\n  {\n    value: \"4\",\n    text: \"60% - 80%\"\n  },\n  {\n    value: \"5\",\n    text: \"80% - 100%\"\n  }\n]\n\nclass WelcomeTable extends Component{\n  constructor(props){\n    super(props);\n\n    this.state = {\n      activeTab: '1',\n      pagesEmployees: 0,\n      pagesOrganizations: 0,\n      currentPage: 1,\n      all_employees: [[]],\n      employees: [[]],\n      organizations: [[]],\n      modal: false,\n      rfc_to_delete: '',\n      from_date: '',\n      to_date: '',\n      filtered_date: true,\n      percentage_filter: 0,\n      filter_name: false,\n      name_search: \"\"\n    }\n  }\n\n  componentDidMount = () => {\n    this.search_all(0);\n  }\n\n  componentWillUnmount = () => {\n    if (this.myVar) {\n      clearInterval(this.myVar)\n    }\n  }\n\n  componentDidUpdate = () => {\n    if (!this.state.filtered_date && this.state.from_date !== '' && this.state.to_date !== '') {\n      \n      this.setState( { filtered_date: true } )\n      \n      this.search_all(this.state.percentage_filter);\n    }\n  }\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) this.setState({ activeTab: tab });\n  }\n\n  _setState = (state) => {\n    this.setState(state);\n  }\n\n  search_all = (percentageFilter) => {    \n    let user_id = jwtDecode(localStorage.getItem(\"id_token\")).sub\n    let updateInfo = []\n    let paginatedEmployees = []\n    let employees = []\n    let paginatedOrganizations = []\n    let organizations = []\n\n    axios.post(API_URL + \"/api/v1/get_all_employees\", {\n      user_id,\n      filter_percentages: percentageFilter,\n      from_date: this.state.from_date,\n      to_date: this.state.to_date\n    }).then((res) => {\n      for (var i = 0; i < res.data[0].length; i++) {\n        if (i % 5 === 0) {\n          if (i > 0) {\n            paginatedEmployees.push(employees)\n          }\n          employees = []\n        }\n        employees.push(res.data[0][i])\n      }\n\n      if (employees.length > 0) {\n        paginatedEmployees.push(employees)\n      }\n\n      for (var i = 0; i < res.data[1].length; i++) {\n        if (i % 5 === 0) {\n          if (i > 0) {\n            paginatedOrganizations.push(organizations)\n          }\n          organizations = []\n        }\n        organizations.push(res.data[1][i])\n      }\n\n      if (organizations.length > 0) {\n        paginatedOrganizations.push(organizations)\n      }\n\n      if (res.data !== 'empty') {\n        this.setState({\n          employees: paginatedEmployees,\n          all_employees: paginatedEmployees,\n          organizations: paginatedOrganizations,\n          pagesEmployees: paginatedEmployees.length,\n          pagesOrganizations: paginatedOrganizations.length,\n          currentPage: 1\n        }, () => {\n          if (this.state.employees.length > 0) {\n            this.state.employees[0].forEach(function (element) {\n              if (element.percentage < 100) {\n                updateInfo.push('true')\n              } else {\n                updateInfo.push('false')\n              }\n            })\n          }\n          if (this.state.organizations.length > 0) {\n            this.state.organizations[0].forEach(function (element) {\n              if (element.percentage < 100) {\n                updateInfo.push('true')\n              } else {\n                updateInfo.push('false')\n              }\n            })\n          }\n          if (updateInfo.indexOf('true') === -1) {\n            clearInterval(myVar)\n          }\n          console.log(this.state.filter_name);\n          if (this.state.filter_name) {\n            this.searchFilter()\n          }\n        })\n      }\n    });\n\n    var myVar = setInterval(async () => {\n      updateInfo = []\n      paginatedEmployees = []\n      employees = []\n      paginatedOrganizations = []\n      organizations = []\n\n      axios.post(API_URL + \"/api/v1/get_all_employees\", {\n        user_id,\n        filter_percentages: percentageFilter,\n        from_date: this.state.from_date,\n        to_date: this.state.to_date\n      }).then((res) => {\n        for (var i = 0; i < res.data[0].length; i++) {\n          if (i % 5 === 0) {\n            if (i > 0) {\n              paginatedEmployees.push(employees)\n            }\n            employees = []\n          }\n          employees.push(res.data[0][i])\n        }\n\n        if (employees.length > 0) {\n          paginatedEmployees.push(employees)\n        }\n\n        for (var i = 0; i < res.data[1].length; i++) {\n          if (i % 5 === 0) {\n            if (i > 0) {\n              paginatedOrganizations.push(organizations)\n            }\n            organizations = []\n          }\n          organizations.push(res.data[1][i])\n        }\n\n        if (organizations.length > 0) {\n          paginatedOrganizations.push(organizations)\n        }\n\n        if (res.data !== 'empty') {\n          this.setState({\n            employees: paginatedEmployees,\n            all_employees: paginatedEmployees,\n            organizations: paginatedOrganizations,\n            pagesEmployees: paginatedEmployees.length,\n            pagesOrganizations: paginatedOrganizations.length\n          }, () => {\n            if (this.state.employees.length > 0) {\n              this.state.employees[0].forEach(function (element) {\n                if (element.percentage < 100) {\n                  updateInfo.push('true')\n                } else {\n                  updateInfo.push('false')\n                }\n              })\n            }\n            if (this.state.organizations.length > 0) {\n              this.state.organizations[0].forEach(function (element) {\n                if (element.percentage < 100) {\n                  updateInfo.push('true')\n                } else {\n                  updateInfo.push('false')\n                }\n              })\n            }\n            if (updateInfo.indexOf('true') === -1) {\n              clearInterval(myVar)\n            }\n            console.log(this.state.filter_name);\n            if (this.state.filter_name) {\n              this.searchFilter()\n            }\n          })\n        }\n      })\n    }, 5000)\n  }\n\n  handlePercentage = (event) => {\n    this.setState({ percentage_filter: event });\n    this.search_all(parseInt(event));\n  }\n\n  handleFromDate = (event) => {\n    this.setState({\n      from_date: event.target.value,\n      filtered_date: false\n    });\n  }\n\n  handleToDate = (event) => {\n    this.setState({\n      to_date: event.target.value,\n      filtered_date: false\n    });\n  }\n\n  deletePerson=()=>{\n    let user_id = jwtDecode(localStorage.getItem(\"id_token\")).sub\n    let rfc = this.state.rfc_to_delete\n\n    axios.post(API_URL + '/api/v1/search/delete', {\n      rfc,\n      user_id\n    }).then((res) => {\n      window.location.reload()\n    })\n  }\n\n  toggleModalDeleteEmp=(rfc)=> {\n    this.setState({\n      modal: !this.state.modal,\n      rfc_to_delete: rfc\n    })\n  }\n\n  handleSearch = (ev) => {\n    if (ev.target.value.length > 0) {\n      this.setState({\n        filter_name: true\n      })\n    }\n    else {\n      this.setState({\n        filter_name: false\n      })\n    }\n\n    var search_value = ev.target.value.toUpperCase();\n\n    this.setState({\n      name_search: search_value\n    }, () => {\n      this.searchFilter()\n    });\n  }\n\n  searchFilter = () => {\n    var search_value = this.state.name_search.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\")\n    var filtered_employees = []\n\n    for (var i=0; i<this.state.all_employees.length; i++) {\n      for (var j = 0; j < this.state.all_employees[i].length; j++) {\n        if (this.state.all_employees[i][j].name.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").startsWith(search_value) || \n            this.state.all_employees[i][j].lastName1.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").startsWith(search_value) || \n            this.state.all_employees[i][j].lastName2.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").startsWith(search_value)) {\n          filtered_employees.push(this.state.all_employees[i][j]);\n        }\n      }\n    }\n\n    var paginatedEmployees = []\n    var employees = []\n\n    for (var i = 0; i < filtered_employees.length; i++) {\n      if (i % 5 === 0) {\n        if (i > 0) {\n          paginatedEmployees.push(employees)\n        }\n        employees = []\n      }\n      employees.push(filtered_employees[i])\n    }\n\n    if (employees.length > 0) {\n      paginatedEmployees.push(employees)\n    }\n    \n    let updateInfo = []\n\n    this.setState({\n      employees: paginatedEmployees,\n      pagesEmployees: paginatedEmployees.length,\n      currentPage: 1\n    }, () => {\n      if (this.state.employees.length > 0) {\n        this.state.employees[0].forEach(function (element) {\n          if (element.percentage < 100) {\n            updateInfo.push('true')\n          } else {\n            updateInfo.push('false')\n          }\n        })\n      }\n    })\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div>\n          <Modal centered={true} isOpen={this.state.modal} toggle={() => this.toggleModalDeleteEmp()} className={this.props.className}>\n            <ModalHeader toggle={() => this.toggleModalDeleteEmp()}>Eliminar Persona Física</ModalHeader>\n            <ModalBody>\n              ¿Está seguro de <b>Eliminar</b> a esta persona? no podrá recuperar la información después.\n              </ModalBody>\n            <ModalFooter>\n              <ButtonPrimary onClick={() => this.toggleModalDeleteEmp()} title=\"Cancelar\"></ButtonPrimary>\n              <ButtonPrimary onClick={() => this.deletePerson()} title=\"Eliminar\"></ButtonPrimary>\n            </ModalFooter>\n          </Modal>\n        </div>\n        <Nav tabs>\n          <NavItem>\n            <NavLink\n              className={classnames({ active: this.state.activeTab === '1' })}\n              onClick={() => { this.toggle('1'); }}\n            >\n              Personas físicas\n          </NavLink>\n          </NavItem>\n          <NavItem>\n            <NavLink\n              className={classnames({ active: this.state.activeTab === '2' })}\n              onClick={() => { this.toggle('2'); }}\n            >\n              Personas morales\n          </NavLink>\n        </NavItem>\n      </Nav>\n\n      <TabContent activeTab={this.state.activeTab}>\n        <TabPane tabId=\"1\">\n          <div className=\"cm-card -white -no-cursor\">\n            <Table>\n              <thead>\n                <tr>\n                  <th>\n                    <p>Nombre</p>\n                    <InputForm inputColor=\"-secondary\" warning=\"No se encntraron resultados\" type=\"text\" placeholder={'Buscar'} onChange={this.handleSearch}/>          \n                  </th>\n                  <th> \n                    <p>Fecha de alta</p>\n                    <div className=\"row\">\n                      <InputForm customClasses=\"col-6\" inputColor=\"-secondary\" warning=\"Datos no válidos\" type=\"date\" placeholder={'de'} onChange={this.handleFromDate} />\n                      <InputForm customClasses=\"col-6\" inputColor=\"-secondary\" warning=\"Datos no válidos\" type=\"date\" placeholder={'a'} onChange={this.handleToDate} />\n                    </div>\n                  </th>\n                  <th> \n                    <p>Porcentaje de confiabilidad</p>\n                    <DropdownSelect onChange={this.handlePercentage} items={dropdown_percentages_items} selected=\"Todos\" />\n                  </th>                \n                </tr>\n              </thead>\n              <tbody>\n                { this.state.employees.length > 0 &&\n                  this.state.employees[this.state.currentPage - 1].map(emp => {\n                  let fix_date = emp.date\n                  fix_date = fix_date.replace('GMT', '')\n                  fix_date = fix_date.split(',')[1]\n                  const complete_name = emp.name+' '+emp.lastName1+' '+emp.lastName2\n\n                  return (\n                    <tr>\n                      <th scope=\"row\">\n                        <a href={`anomaly-detection/${emp.rfc}/fisica`}>{complete_name}</a>\n                      </th>                \n                      <td>{fix_date}</td>\n                      <td>{emp.score}%</td>\n                      {emp.percentage >= 100 &&\n                      <td>\n                        <Link to={{\n                          pathname:`anomaly-detection/${emp.rfc}/fisica`\n                        }}>\n                          <div className=\"icon-wrapper\">\n                            <FaExternalLinkAlt/>\n                          </div>\n                        </Link> \n                        </td>\n                      }\n                      {emp.percentage < 100 &&\n                      <td>\n                        <p align=\"center\"><b>{emp.percentage} %</b></p>\n                        <Progress value={emp.percentage}/>            \n                      </td>\n                      }\n                      <td><button onClick={this.toggleModalDeleteEmp.bind(this, emp.rfc)} className=\"fa-btn -warning\"><FaTrash/></button></td>\n                    </tr>\n                  )\n                })}\n              </tbody>\n            </Table>\n            <Paginator pages={this.state.pagesEmployees} setState={this._setState} currentPage={this.state.currentPage}/>\n          </div>        \n        </TabPane>\n        <TabPane tabId=\"2\">\n          <div className=\"cm-card -white -no-cursor\">\n            <Table>\n              <thead>\n                <tr>\n                  <th>\n                    <p>Nombre</p>\n                    <InputForm inputColor=\"-secondary\" warning=\"Datos no válidos\" type=\"text\" placeholder={'Buscar'}/>          \n                  </th>\n                  <th> \n                    <p>Fecha de alta</p>\n                    <InputForm inputColor=\"-secondary\" warning=\"Datos no válidos\" type=\"date\" placeholder={'Buscar'} onChange={this.handleDate}/>\n                  </th>\n                  <th> \n                    <p>Porcentaje de confiabilidad</p>\n                    <div className=\"dropdown-wrapper\">\n                      <select className=\"dropdown-user w-100\">\n                      <option value=\"0\">cualquiera</option>\n                        <option value=\"1\">0 - 20%</option>\n                        <option value=\"2\">20% - 40%</option>\n                        <option value=\"3\">40% - 60%</option>\n                        <option value=\"4\">60% - 80%</option>\n                        <option value=\"5\">80% - 100%</option>\n                      </select>\n                      <button className=\"fa-btn dropdown-icon\">\n                        <FaAngleDown/>\n                      </button>\n                    </div>\n                  </th>                \n                </tr>\n              </thead>\n              <tbody>\n                { this.state.organizations.length > 0 &&\n                  this.state.organizations[this.state.currentPage - 1].map(emp => {\n                  let fix_date = emp.date\n                  fix_date = fix_date.replace('GMT', '')\n                  fix_date = fix_date.split(',')[1]\n                  const complete_name = emp.name\n\n                  return (\n                    <tr>\n                      <th scope=\"row\">\n                        <a href={`anomaly-detection/${emp.rfc}/moral`}>{complete_name}</a>\n                      </th>\n                      <td>{fix_date}</td>\n                      <td>{emp.score}%</td>\n                      {emp.percentage >= 100 &&\n                        <td>\n                          <Link to={{\n                            pathname: `anomaly-detection/${emp.rfc}/moral`\n                          }}>\n                            <div className=\"icon-wrapper\">\n                              <FaExternalLinkAlt />\n                            </div>\n                          </Link>\n                        </td>\n                      }\n                      {emp.percentage < 100 &&\n                        <td>\n                          <p align=\"center\"><b>{emp.percentage} %</b></p>\n                          <Progress value={emp.percentage} />\n                        </td>\n                      }\n                      <td><button className=\"fa-btn -warning\"><FaTrash /></button></td>\n                    </tr>\n                  )\n                })}\n              </tbody>\n            </Table>\n            <Paginator pages={this.state.pagesEmployees} setState={this._setState} currentPage={this.state.currentPage}/>\n          </div> \n        </TabPane>\n\n      </TabContent>\n\n    </React.Fragment>\n  )}\n  \n}\n\nexport default WelcomeTable"]},"metadata":{},"sourceType":"module"}